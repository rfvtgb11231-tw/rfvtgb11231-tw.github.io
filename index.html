<!DOCTYPE html>
<html lang="zh-TW">
<head>
<meta charset="UTF-8">
<title>犬、貓美容服務定型化契約</title>
<style>
body {
  font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
  margin: 20px;
  line-height: 1.7;
}
h1 {
  margin-bottom: 10px;
}
#tabs {
  margin-bottom: 16px;
}
#tabs button {
  margin: 4px 4px 4px 0;
  padding: 6px 12px;
  border: 1px solid #ccc;
  background: #f5f5f5;
  cursor: pointer;
}
#tabs button.active {
  background: #333;
  color: #fff;
}
.section {
  margin-bottom: 20px;
}
.section h3 {
  margin-bottom: 6px;
}
</style>
</head>

<body>
<!-- 上方卡片區塊 -->
<div style="
  max-width: 720px;
  margin: 20px auto;
  padding: 20px;
  background: #f2f2f2;
  border-radius: 12px;
">
  <h2 style="margin-top:0;">寵物美容服務定型化契約</h2>

  <p style="margin:6px 0;">
    公司名稱：熊嶼寵物有限公司
  </p>
  <p style="margin:6px 0;">
    地址：新北市板橋區合宜一路11號
  </p>
  <p style="margin:6px 0;">
    官方 LINE：@kumajima2025
  </p>
</div>
<h1 id="contractTitle">載入中…</h1>


<!-- 契約滑動閱讀區 -->
<div style="
  max-width: 720px;
  margin: 0 auto;
  padding: 16px;
">

  <h3 style="margin-bottom:8px;">
    契約內容（請完整閱讀）
  </h3>

  <div id="content" style="
    max-height: 60vh;
    overflow-y: auto;
    padding: 16px;
    border-radius: 12px;
    background: #f9f9f9;
    border: 1px solid #ddd;
  ">
    <!-- 契約內容會由 JS 放進來 -->
  </div>
<!-- 同意與下一步 -->
<div style="
  max-width: 720px;
  margin: 16px auto 0;
  padding: 16px;
  background: #fff;
  border-radius: 12px;
  border: 1px solid #ddd;
">

  <label style="display:flex; align-items:flex-start; gap:8px;">
    <input type="checkbox" id="agreeCheckbox" disabled>
    <span>
      我已完整閱讀並同意上述契約內容
    </span>
  </label>

  <button id="nextBtn"
    disabled
    style="
      margin-top:12px;
      width:100%;
      padding:12px;
      font-size:16px;
      border:none;
      border-radius:8px;
      background:#ccc;
      color:#666;
    ">
    下一步：填寫確認表單
  </button>

</div>
</div>

<script>
let contractData;
let currentTab = 0;

fetch("contract.json")
  .then(res => res.json())
  .then(data => {
    contractData = data;
    document.getElementById("contractTitle").innerText = data.meta.name;
    const contentDiv = document.getElementById("content");
contentDiv.innerHTML = "";



  contentDiv.appendChild(section);
});
  });
const list = data.tabs || data.sections || [];

list.forEach(sectionData => {
  const section = document.createElement("section");

  if (sectionData.title) {
    const h4 = document.createElement("h4");
    h4.innerText = sectionData.title;
    section.appendChild(h4);
  }

  if (Array.isArray(sectionData.items)) {
    sectionData.items.forEach(item => {
      const p = document.createElement("p");
      p.innerText = item;
      section.appendChild(p);
    });
  }

  if (sectionData.content) {
    const p = document.createElement("p");
    p.innerText = sectionData.content;
    section.appendChild(p);
  }

  contentDiv.appendChild(section);
});

  const contentDiv = document.getElementById("content");
  contentDiv.innerHTML = "";
  const tab = contractData.tabs[currentTab];

  tab.sections.forEach(sec => {
    const sectionDiv = document.createElement("div");
    sectionDiv.className = "section";

    const h3 = document.createElement("h3");
    h3.innerText = sec.heading;
    sectionDiv.appendChild(h3);

    // 摘要（預設顯示）
    if (sec.summary) {
      const summary = document.createElement("p");
      summary.style.background = "#f7f7f7";
      summary.style.padding = "10px";
      summary.style.borderLeft = "4px solid #666";
      summary.innerText = "重點說明：" + sec.summary;
      sectionDiv.appendChild(summary);
    }

    // 展開按鈕
    const toggleBtn = document.createElement("button");
    toggleBtn.innerText = "展開政府公告全文";
    toggleBtn.style.marginBottom = "8px";

    const fullTextDiv = document.createElement("div");
    fullTextDiv.style.display = "none";

    sec.paragraphs.forEach(p => {
      const para = document.createElement("p");
      para.innerText = p;
      fullTextDiv.appendChild(para);
    });

    toggleBtn.onclick = () => {
      const isOpen = fullTextDiv.style.display === "block";
      fullTextDiv.style.display = isOpen ? "none" : "block";
      toggleBtn.innerText = isOpen ? "展開政府公告全文" : "收合政府公告全文";
    };

    sectionDiv.appendChild(toggleBtn);
    sectionDiv.appendChild(fullTextDiv);
    contentDiv.appendChild(sectionDiv);
  });
}
  // ===== 滑動到底解鎖同意 =====
document.addEventListener("DOMContentLoaded", () => {
  const content = document.getElementById("content");
  const agreeCheckbox = document.getElementById("agreeCheckbox");
  const nextBtn = document.getElementById("nextBtn");

  if (!content || !agreeCheckbox || !nextBtn) return;

  // 偵測是否滑到最底
  content.addEventListener("scroll", () => {
    const isBottom =
      content.scrollTop + content.clientHeight >= content.scrollHeight - 5;

    if (isBottom) {
      agreeCheckbox.disabled = false;
    }
  });

  // 勾選後啟用按鈕
  agreeCheckbox.addEventListener("change", () => {
    if (agreeCheckbox.checked) {
      nextBtn.disabled = false;
      nextBtn.style.background = "#333";
      nextBtn.style.color = "#fff";
    } else {
      nextBtn.disabled = true;
      nextBtn.style.background = "#ccc";
      nextBtn.style.color = "#666";
    }
  });

  // 點下一步 → 前往表單
  nextBtn.addEventListener("click", () => {
    window.location.href = "form.html";
  });
});
  <script>
// ===== 滑動到底解鎖同意 =====
document.addEventListener("DOMContentLoaded", () => {
  const content = document.getElementById("content");
  const agreeCheckbox = document.getElementById("agreeCheckbox");
  const nextBtn = document.getElementById("nextBtn");

  if (!content || !agreeCheckbox || !nextBtn) return;

  // 偵測是否滑到最底
  content.addEventListener("scroll", () => {
    const isBottom =
      content.scrollTop + content.clientHeight >= content.scrollHeight - 5;

    if (isBottom) {
      agreeCheckbox.disabled = false;
    }
  });

  // 勾選後啟用按鈕
  agreeCheckbox.addEventListener("change", () => {
    if (agreeCheckbox.checked) {
      nextBtn.disabled = false;
      nextBtn.style.background = "#333";
      nextBtn.style.color = "#fff";
    } else {
      nextBtn.disabled = true;
      nextBtn.style.background = "#ccc";
      nextBtn.style.color = "#666";
    }
  });

  // 點下一步 → 前往表單
  nextBtn.addEventListener("click", () => {
    window.location.href = "form.html";
  });
});
</script>
</script>
<hr>

<div style="margin-top:20px; padding:15px; background:#f9f9f9;">
  <h3>下一步：填寫確認表單</h3>
  <p>
    請您完整閱讀以上契約條文後，點擊下方按鈕前往填寫 Google 表單。
  </p>
  <a href="form.html"
     style="
       display:inline-block;
       padding:10px 16px;
       background:#333;
       color:#fff;
       text-decoration:none;
       border-radius:4px;
     ">
     前往填寫 Google 表單
  </a>
</div>
</body>
</html>
